# توثيق اختبارات أداة جمع معلومات أرقام الهواتف

## نظرة عامة

هذا المستند يوفر توثيقًا شاملاً لاستراتيجية اختبار أداة جمع معلومات أرقام الهواتف. يغطي أنواع الاختبارات المختلفة، وحالات الاختبار، وكيفية تنفيذ الاختبارات، وتفسير النتائج.

## استراتيجية الاختبار

### أنواع الاختبارات

1. **اختبارات الوحدة**: اختبار الوظائف الفردية والفئات في الكود.
2. **اختبارات التكامل**: اختبار تفاعل المكونات المختلفة مع بعضها البعض.
3. **اختبارات النظام**: اختبار النظام بأكمله من منظور المستخدم النهائي.
4. **اختبارات الأداء**: قياس أداء النظام تحت ظروف مختلفة.
5. **اختبارات الأمان**: التحقق من عدم وجود ثغرات أمنية.

### أدوات الاختبار

- **pytest**: إطار عمل لاختبارات الوحدة والتكامل في Python.
- **unittest**: مكتبة اختبار قياسية في Python.
- **mock**: مكتبة لإنشاء كائنات وهمية للاختبار.
- **coverage**: أداة لقياس تغطية الكود بالاختبارات.

## اختبارات الوحدة

### اختبار فئة `PhoneInfoTool`

#### اختبار دالة `validate_phone_number`

**حالات الاختبار**:

1. رقم هاتف صالح مع رمز الدولة
2. رقم هاتف صالح بدون رمز الدولة
3. رقم هاتف غير صالح (أحرف)
4. رقم هاتف غير صالح (قصير جدًا)
5. رقم هاتف غير صالح (طويل جدًا)
6. قيمة فارغة

**مثال على كود الاختبار**:

```python
def test_validate_phone_number():
    phone_tool = PhoneInfoTool()
    
    # اختبار رقم صالح مع رمز الدولة
    assert phone_tool.validate_phone_number("+966501234567") == True
    
    # اختبار رقم غير صالح
    assert phone_tool.validate_phone_number("abc") == False
    
    # اختبار قيمة فارغة
    assert phone_tool.validate_phone_number("") == False
```

#### اختبار دالة `get_basic_info`

**حالات الاختبار**:

1. رقم هاتف صالح من دول مختلفة (السعودية، الولايات المتحدة، المملكة المتحدة، إلخ)
2. رقم هاتف غير صالح

**مثال على كود الاختبار**:

```python
def test_get_basic_info():
    phone_tool = PhoneInfoTool()
    
    # اختبار رقم سعودي
    info = phone_tool.get_basic_info("+966501234567")
    assert info["country_code"] == "SA"
    assert info["country_name"] == "Saudi Arabia"
    assert "carrier" in info
    
    # اختبار رقم أمريكي
    info = phone_tool.get_basic_info("+12125551234")
    assert info["country_code"] == "US"
    assert info["country_name"] == "United States"
    
    # اختبار رقم غير صالح
    info = phone_tool.get_basic_info("abc")
    assert info is None
```

#### اختبار دالة `get_geolocation`

**حالات الاختبار**:

1. رقم هاتف صالح من دول مختلفة
2. رقم هاتف غير صالح

#### اختبار دالة `get_timezone_info`

**حالات الاختبار**:

1. رقم هاتف صالح من مناطق زمنية مختلفة
2. رقم هاتف غير صالح

#### اختبار دالة `analyze_number`

**حالات الاختبار**:

1. رقم هاتف صالح
2. رقم هاتف غير صالح

#### اختبار دالة `export_results`

**حالات الاختبار**:

1. تصدير بتنسيق JSON
2. تصدير بتنسيق CSV
3. تصدير بتنسيق Excel
4. تصدير بتنسيق HTML
5. تصدير إلى مجلد غير موجود

## اختبارات التكامل

### اختبار تكامل واجهة سطر الأوامر

**حالات الاختبار**:

1. تشغيل الأداة مع رقم هاتف صالح
2. تشغيل الأداة مع رقم هاتف غير صالح
3. تشغيل الأداة بدون معاملات
4. تصدير النتائج بتنسيقات مختلفة

### اختبار تكامل الواجهة الرسومية

**حالات الاختبار**:

1. تشغيل الواجهة الرسومية
2. إدخال رقم هاتف صالح وتحليله
3. إدخال رقم هاتف غير صالح وتحليله
4. تصدير النتائج بتنسيقات مختلفة
5. اختبار جميع الأزرار والوظائف

## اختبارات النظام

### اختبار سيناريوهات المستخدم

**سيناريو 1**: تحليل رقم هاتف صالح وعرض النتائج

1. تشغيل الأداة
2. إدخال رقم هاتف صالح
3. التحقق من عرض النتائج بشكل صحيح

**سيناريو 2**: تحليل رقم هاتف غير صالح

1. تشغيل الأداة
2. إدخال رقم هاتف غير صالح
3. التحقق من عرض رسالة خطأ مناسبة

**سيناريو 3**: تصدير النتائج

1. تحليل رقم هاتف صالح
2. تصدير النتائج بتنسيق معين
3. التحقق من إنشاء ملف التصدير بشكل صحيح

## اختبارات الأداء

### قياس زمن الاستجابة

**حالات الاختبار**:

1. قياس زمن تحليل رقم هاتف واحد
2. قياس زمن تحليل مجموعة من أرقام الهواتف (10، 100، 1000)

**مثال على كود الاختبار**:

```python
import time

def test_performance():
    phone_tool = PhoneInfoTool()
    phone_numbers = ["+966501234567", "+12125551234", "+447911123456", "+61291234567", "+81312345678"]
    
    # قياس زمن تحليل رقم واحد
    start_time = time.time()
    phone_tool.analyze_number(phone_numbers[0])
    single_time = time.time() - start_time
    print(f"زمن تحليل رقم واحد: {single_time:.4f} ثانية")
    
    # قياس زمن تحليل مجموعة من الأرقام
    start_time = time.time()
    for number in phone_numbers:
        phone_tool.analyze_number(number)
    batch_time = time.time() - start_time
    print(f"زمن تحليل {len(phone_numbers)} أرقام: {batch_time:.4f} ثانية")
    print(f"متوسط الزمن لكل رقم: {batch_time/len(phone_numbers):.4f} ثانية")
```

### قياس استخدام الموارد

**حالات الاختبار**:

1. قياس استخدام الذاكرة أثناء تحليل الأرقام
2. قياس استخدام وحدة المعالجة المركزية

## اختبارات الأمان

### اختبار إدخال البيانات

**حالات الاختبار**:

1. إدخال نصوص طويلة جدًا
2. إدخال رموز خاصة
3. إدخال أكواد برمجية

### اختبار التعامل مع الملفات

**حالات الاختبار**:

1. تصدير إلى مجلد محمي
2. تصدير باسم ملف غير صالح

## تنفيذ الاختبارات

### إعداد بيئة الاختبار

1. إنشاء بيئة افتراضية جديدة
2. تثبيت متطلبات الاختبار

```bash
python -m venv test_venv
test_venv\Scripts\activate
pip install -r requirements.txt
pip install pytest pytest-cov mock
```

### تشغيل اختبارات الوحدة

```bash
pytest test_tool.py -v
```

### تشغيل اختبارات التغطية

```bash
pytest --cov=phone_info_tool test_tool.py
```

### تشغيل جميع الاختبارات

```bash
pytest
```

## تفسير نتائج الاختبار

### تقرير اختبارات الوحدة

بعد تشغيل اختبارات الوحدة، سيتم عرض تقرير يوضح عدد الاختبارات التي تم تشغيلها، وعدد الاختبارات الناجحة، وعدد الاختبارات الفاشلة.

```
============================= test session starts =============================
platform win32 -- Python 3.9.5, pytest-6.2.5, py-1.10.0, pluggy-0.13.1
rootdir: C:\Users\Dell\Desktop\ip
collected 10 items

test_tool.py::test_validate_phone_number PASSED                        [ 10%]
test_tool.py::test_get_basic_info PASSED                               [ 20%]
test_tool.py::test_get_geolocation PASSED                              [ 30%]
test_tool.py::test_get_timezone_info PASSED                            [ 40%]
test_tool.py::test_analyze_number PASSED                               [ 50%]
test_tool.py::test_export_results_json PASSED                          [ 60%]
test_tool.py::test_export_results_csv PASSED                           [ 70%]
test_tool.py::test_export_results_excel PASSED                         [ 80%]
test_tool.py::test_export_results_html PASSED                          [ 90%]
test_tool.py::test_performance PASSED                                  [100%]

============================= 10 passed in 5.62s =============================
```

### تقرير تغطية الكود

بعد تشغيل اختبارات التغطية، سيتم عرض تقرير يوضح نسبة تغطية الكود بالاختبارات.

```
---------- coverage: platform win32, python 3.9.5-final-0 -----------
Name                  Stmts   Miss  Cover
-----------------------------------------
phone_info_tool.py      120     15    88%
-----------------------------------------
TOTAL                   120     15    88%
```

## أفضل الممارسات للاختبار

1. **كتابة اختبارات قبل كتابة الكود**: اتباع نهج التطوير الموجه بالاختبار (TDD).
2. **اختبار جميع المسارات**: التأكد من اختبار جميع مسارات التنفيذ المحتملة.
3. **استخدام بيانات اختبار متنوعة**: اختبار مجموعة متنوعة من أرقام الهواتف من دول مختلفة.
4. **اختبار حالات الخطأ**: التأكد من اختبار كيفية تعامل الكود مع المدخلات غير الصالحة.
5. **اختبار الحدود**: اختبار القيم الحدية والحالات الخاصة.

## الخلاصة

يوفر هذا المستند إطارًا شاملاً لاختبار أداة جمع معلومات أرقام الهواتف. باتباع استراتيجية الاختبار الموضحة وتنفيذ حالات الاختبار المذكورة، يمكن التأكد من أن الأداة تعمل بشكل صحيح وموثوق.

---

**المطور**: Saudi Linux  
**البريد الإلكتروني**: SaudiLinuxy7@gmail.com