# التوثيق الفني لأداة جمع معلومات أرقام الهواتف

هذا المستند يشرح البنية الفنية والتصميم الداخلي لأداة جمع معلومات أرقام الهواتف.

## نظرة عامة على البنية

تتكون الأداة من فئة رئيسية واحدة `PhoneInfoTool` التي تحتوي على جميع الوظائف اللازمة لتحليل أرقام الهواتف وجمع المعلومات عنها. تستخدم الأداة مكتبات خارجية متعددة للحصول على المعلومات من مصادر مختلفة.

## المكتبات المستخدمة

- **phonenumbers**: المكتبة الرئيسية لتحليل أرقام الهواتف والتحقق من صحتها
- **pytz**: للتعامل مع المناطق الزمنية
- **requests**: لإجراء طلبات HTTP للاتصال بالخدمات الخارجية
- **pandas**: لمعالجة البيانات وتصديرها
- **geopy**: للحصول على معلومات الموقع الجغرافي
- **colored**: لتنسيق مخرجات الطرفية بالألوان
- **pretty-html-table**: لإنشاء جداول HTML منسقة

## تدفق البيانات

1. **الإدخال**: يتم إدخال رقم الهاتف من قبل المستخدم أو تمريره كمعامل سطر أوامر
2. **التحقق**: يتم التحقق من صحة الرقم باستخدام مكتبة phonenumbers
3. **جمع المعلومات**: يتم جمع المعلومات من مصادر مختلفة:
   - معلومات أساسية (الدولة، شركة الاتصالات، نوع الرقم)
   - معلومات الموقع الجغرافي
   - معلومات المنطقة الزمنية
   - معلومات من قواعد البيانات عبر الإنترنت (نموذج توضيحي)
4. **المعالجة**: يتم تنظيم المعلومات في هيكل بيانات موحد
5. **العرض/التصدير**: يتم عرض المعلومات للمستخدم و/أو تصديرها إلى ملف

## هيكل الفئة الرئيسية

### الخصائص

- **results**: قاموس يحتوي على جميع المعلومات التي تم جمعها
- **phone_number**: رقم الهاتف الأصلي المدخل
- **parsed_number**: كائن PhoneNumber بعد التحليل
- **geolocator**: كائن Nominatim للحصول على معلومات الموقع الجغرافي

### الدوال

#### `__init__()`

تهيئة الفئة وعرض الشعار.

#### `banner()`

عرض شعار الأداة في الطرفية باستخدام ألوان ANSI.

#### `validate_phone_number(phone_number)`

1. تنظيف الرقم من الأحرف غير الرقمية
2. إضافة رمز الدولة إذا لم يكن موجودًا
3. تحليل الرقم باستخدام مكتبة phonenumbers
4. التحقق من صحة الرقم

#### `get_basic_info()`

1. استخراج رمز الدولة والرقم الوطني
2. الحصول على اسم الدولة باستخدام geocoder
3. الحصول على اسم شركة الاتصالات باستخدام carrier
4. الحصول على المناطق الزمنية باستخدام timezone
5. تنسيق الرقم بالتنسيق الدولي
6. التحقق من صحة الرقم وإمكانية وجوده
7. تحديد نوع الرقم (محمول، ثابت، إلخ)

#### `get_geolocation()`

1. الحصول على اسم الدولة والمنطقة
2. محاولة الحصول على الإحداثيات باستخدام geopy

#### `get_timezone_info()`

1. الحصول على المناطق الزمنية للرقم
2. الحصول على الوقت الحالي في كل منطقة زمنية

#### `search_online_databases()`

نموذج توضيحي للبحث في قواعد البيانات عبر الإنترنت. في التطبيق الحقيقي، يمكن استبدال هذا بواجهات برمجة تطبيقات حقيقية.

#### `analyze_number(phone_number)`

1. تحليل الرقم والتحقق من صحته
2. جمع المعلومات الأساسية
3. جمع معلومات الموقع الجغرافي
4. جمع معلومات المنطقة الزمنية
5. البحث في قواعد البيانات عبر الإنترنت

#### `display_results()`

عرض النتائج في الطرفية بتنسيق منظم ومقسم إلى أقسام.

#### `export_results(format_type='json', filename=None)`

1. تحديد اسم الملف إذا لم يتم توفيره
2. تصدير النتائج بالتنسيق المطلوب:
   - JSON: تصدير مباشر للقاموس
   - CSV/Excel: تحويل البيانات المتداخلة إلى هيكل مسطح
   - HTML: إنشاء تقرير HTML منسق

## تفاصيل التنفيذ

### التعامل مع أرقام الهواتف

تستخدم الأداة مكتبة phonenumbers لتحليل أرقام الهواتف والتحقق من صحتها. تقوم المكتبة بتحليل الرقم وتوفير معلومات مثل رمز الدولة والرقم الوطني ونوع الرقم.

```python
parsed_number = phonenumbers.parse(cleaned_number, None)
is_valid = phonenumbers.is_valid_number(parsed_number)
```

### الحصول على معلومات الموقع الجغرافي

تستخدم الأداة مكتبة geopy للحصول على الإحداثيات الجغرافية للدولة المرتبطة برقم الهاتف.

```python
location = self.geolocator.geocode(country)
coordinates = {
    "latitude": location.latitude,
    "longitude": location.longitude
}
```

### التعامل مع المناطق الزمنية

تستخدم الأداة مكتبة pytz للحصول على الوقت الحالي في المناطق الزمنية المرتبطة برقم الهاتف.

```python
time_zones = timezone.time_zones_for_number(self.parsed_number)
for tz in time_zones:
    current_time = datetime.now().astimezone(pytz.timezone(tz)).strftime('%Y-%m-%d %H:%M:%S %Z%z')
```

### تصدير البيانات

تستخدم الأداة مكتبات مختلفة لتصدير البيانات بتنسيقات مختلفة:

- **JSON**: استخدام وحدة json المدمجة
- **CSV/Excel**: استخدام pandas
- **HTML**: استخدام pretty-html-table مع pandas

## تحسينات مستقبلية محتملة

### 1. دعم قواعد بيانات حقيقية

يمكن تحسين الدالة `search_online_databases()` للاتصال بقواعد بيانات حقيقية مثل:

- قواعد بيانات الأرقام المزعجة
- خدمات التحقق من الهوية
- قواعد بيانات الشركات والمؤسسات

### 2. تحسين الأداء

- تخزين النتائج مؤقتًا لتجنب تكرار الاستعلامات
- تنفيذ الاستعلامات بشكل متوازٍ
- تحسين استخدام الذاكرة للتعامل مع كميات كبيرة من البيانات

### 3. توسيع وظائف التحليل

- إضافة تحليل للمخاطر الأمنية
- تحليل الروابط المحتملة مع أرقام أخرى
- تحليل النشاط التاريخي للرقم

### 4. تحسين واجهة المستخدم

- إضافة واجهة مستخدم رسومية
- دعم تحليل مجموعات من الأرقام دفعة واحدة
- إضافة خيارات تصدير متقدمة

## مخطط تدفق البيانات

```
┌─────────────┐     ┌──────────────┐     ┌───────────────┐
│  إدخال رقم  │────>│  التحقق من   │────>│  جمع المعلومات │
│   الهاتف    │     │  صحة الرقم   │     │    الأساسية   │
└─────────────┘     └──────────────┘     └───────┬───────┘
                                                 │
                                                 ▼
┌─────────────┐     ┌──────────────┐     ┌───────────────┐
│    عرض      │<────│   معالجة     │<────│  جمع معلومات  │
│   النتائج   │     │   البيانات   │     │  متقدمة       │
└──────┬──────┘     └──────────────┘     └───────────────┘
       │
       ▼
┌─────────────┐
│    تصدير    │
│   النتائج   │
└─────────────┘
```

## هيكل الملفات

```
ip/
├── phone_info_tool.py     # الملف الرئيسي للأداة
├── requirements.txt       # متطلبات التشغيل
├── README.md              # توثيق المستخدم
├── API_DOCUMENTATION.md   # توثيق واجهة برمجة التطبيقات
├── TECHNICAL_DOCUMENTATION.md  # التوثيق الفني
├── test_tool.py           # أداة اختبار
├── run_tool.bat           # ملف تشغيل للويندوز
└── .gitignore             # ملف تجاهل Git
```

## الخلاصة

تم تصميم أداة جمع معلومات أرقام الهواتف بطريقة مرنة وقابلة للتوسيع. تستخدم الأداة مكتبات قياسية ومفتوحة المصدر للحصول على المعلومات من مصادر مختلفة. يمكن تحسين الأداة بسهولة عن طريق إضافة مصادر معلومات جديدة أو تحسين الوظائف الحالية.